# AIデスクトップマスコット「ここここ」

Gemini APIと音声合成エンジンを使用して、デスクトップマスコットがおしゃべりしてくれるソフトウェアです。
この度は、AIデスクトップマスコット「ここここ」をご利用いただきありがとうございます。
このアプリケーションは、Googleの最新AIと音声合成エンジンを連携させた、対話型のデスクトップキャラクターです。

キャラクターとのおしゃべり、キャラクター同士の雑談、スケジュール通知など、様々な機能を楽しめます。
さらに、このパッケージには、オリジナルキャラクターを簡単に作成・編集し、他のユーザーと共有できる『キャラクタースタジオ』が同梱されています。

【※重要※】
	このアプリケーションをご利用いただくには、いくつかの事前準備（Google APIキーの取得、音声合成エンジンの導入など）が必須となります。
	本手順書をよくお読みいただき、設定を進めてください。設定を色々試す前に、config.iniをコピーしてバックアップを取っておくことを強くお勧めします。

	また、本ソフトウェアの利用を開始した時点で、以下の利用規約に同意したものとみなします。キャラクターの作成・共有を行う前に、必ずご一読ください。
		▶ [AIデスクトップマスコット「ここここ」利用規約](./利用規約.md)

【各種リポジトリURL】
	・デスクトップマスコット：https://github.com/makumoru/AI_DesktopMascot_cocococo
	・キャラクタースタジオ：https://github.com/makumoru/cocococo_character_studio
	・キャラクターアップローダー：https://github.com/YobiYobiMoru/cocococo_character_uploader

※本アプリケーションは、現在のバージョンではWindows専用です。


■ 1. 導入・設定手順
	アプリケーションを正しく動作させるために、以下のステップを順番に行ってください。

	【ステップ1】 準備編：必要なものを揃える
		まず、アプリケーションを設定するために必要な「部品」をPC上に準備します。
		・音声合成エンジンのインストール (VOICEVOX または AivisSpeech)
			キャラクターの音声を再生するために、音声合成エンジンをPCにインストールします。
			どちらか一方、または両方をインストールしてください。
				・VOICEVOX公式サイト：https://voicevox.hiroshiba.jp/
				・AivisSpeech公式サイト：https://aivis-project.com/

		・Google APIキーの取得
			キャラクターの会話を生成するために、GoogleのAPIキーが必要です。
			Google AI Studio にアクセスし、Googleアカウントでログインします。
			ページ内の「Get API key」または「APIキーを取得」をクリックします。
			「Create API key in new project」を選択し、表示されたAPIキーをコピーして、メモ帳などに控えておいてください。
				（このAPIキーは、後ほどアプリケーションの設定画面で使います。）

	【ステップ2】 設定編：初回起動とGUIによる設定
		準備が整ったら、いよいよアプリケーションを起動して設定を行います。

		・アプリケーションの初回起動
			フォルダ内にある「ここここ.exe」をダブルクリックして起動してください。

		・エラーメッセージの表示 (正常な動作です)
			初回起動時は、APIキーや音声エンジンのパスがまだ設定されていないため、「API認証エラー」や「モデル設定エラー」といったエラーメッセージが表示されます。
			これは正常な初期設定への誘導プロセスです。慌てずにメッセージの内容を確認してください。

		・設定画面を開く
			多くの場合、エラーメッセージのダイアログに「OK」ボタンがあり、それを押すと自動的に「API接続設定」画面が開きます。
			もし開かない場合は、キャラクターを右クリックしてメニューから「API接続設定」を選択してください。

		・GUIで各種設定を入力
			開かれた「API接続設定」画面で、以下の項目を設定します。
			・Gemini / Gemma APIキー: 【ステップ1】で取得したAPIキーを、2つの入力欄に貼り付けます。
			・VOICEVOX / AivisSpeech のパス: 各エンジンの「run.exeのパス」の入力欄に、インストールした run.exe のフルパスを設定します。
				（例: C:\Users\YourName\AppData\Local\VOICEVOX\vv-engine\run.exe ）
			・モデル名: 各モデルのドロップダウンリストから、「(推奨)」と表示されているものを選択します。
			・RPD: APIの1日あたりの使用回数上限です。
					画面下部の「レート制限の公式ドキュメント (Google)」リンクから各モデルのレートを確認し記入してください。
					分からなければ、初期設定のままで問題ありません。

		・設定の保存
			すべての入力が終わったら、ウィンドウ下部の「保存して適用」ボタンを押します。
			これで設定は完了です。キャラクターが対話可能な状態になります。

		※ config.ini を手動で編集することも可能ですが、パスの区切り文字(\\)の入力ミスなどを防ぐため、初回設定はGUIで行うことを強くお勧めします。


■ 2. 【最重要】API利用量とコストに関する注意
	このアプリケーションは、より人間らしい対話を実現するために、バックグラウンドでも定期的にAIとの通信を行います（自動での話しかけ、スケジュール通知など）。
	そのため、24時間連続で稼働させた場合、Google AIの無料枠（Free Tier）の1日あたりのリクエスト上限のかなりの部分を消費する可能性があります。
	APIの利用に伴う費用は、すべて利用者個人の責任となります。 
	以下の注意点を必ずご理解の上、ご利用ください。

	【安全な利用のための推奨設定】
		予期せぬ課金を完全に防ぐため、以下のいずれかの方法でAPIキーを準備することを強く推奨します。
		
		方法A（最も安全）: 支払い情報を登録していないGoogleアカウントでAPIキーを取得する
			Google Cloud Platformで支払い方法（クレジットカードなど）を登録していないGoogleアカウントを使用してください。
			この方法であれば、万が一無料枠を使い切っても、APIが自動的に停止するだけで課金は絶対に発生しません。
	
		方法B: このアプリ専用のプロジェクトでAPIキーを新規作成する
			Google AI StudioでAPIキーを作成する際に、「Create API key in new project」を選択し、このアプリ専用のプロジェクトとAPIキーを作成してください。
			これにより、他の用途のAPI利用量と分離して管理できます。
	
	【利用シナリオ別の注意点】
		他の用途でAPIキーを使っていない方:
			上記【安全な利用のための推奨設定】に従っていれば、多くの場合、config.iniで設定された各モデルの無料枠や日間上限回数（RPD）の範囲内で十分に楽しむことができます。
		他のアプリや開発で既に同じAPIキーを利用している方:
			意図せず無料枠を使い切り、他のアプリが動作しなくなったり、
			支払い情報を登録済みの場合は予期せぬ課金が発生したりするリスクがあります。
			必ず上記の方法B（専用プロジェクトの作成）を行ってください。


■ 3. 基本的な使い方
	設定が完了したら、早速キャラクターと触れ合ってみましょう。

	・キャラクターとの対話：
		キャラクターの下部にあるテキストボックスに話したいことを入力し、「送信」ボタンかEnterキーを押します。入力欄でキーボードの↑ ↓キーを押すと、過去の入力履歴を呼び出せます。

	・キャラクターの移動・配置：
		キャラクターの画像部分をドラッグ＆ドロップで移動できます。画面の左右どちらかに寄せると、自動的に内側を向くようにレイアウトが調整されます。この位置情報はアプリ終了時に position.ini に保存され、次回起動時に再現されます。

	・右クリックメニュー：
		キャラクターを右クリックすると、様々な設定メニューが表示されます。

	・表示/非表示：
		キャラクターウィンドウの表示/非表示を切り替えます。

	・常に手前に表示：
		他のウィンドウより常に手前に表示します。

	・カラーテーマ：
		アプリケーションのUI配色を変更できます。

	・最前列に移動：
		ウィンドウが他のアプリに隠れた時に、一時的に最前面に表示します。

	・自動発話を有効にする：
		キャラクターが自動で話しかけてくる機能のON/OFFを切り替えます。

	・自動発話の間隔：
		キャラクターが話しかけてくる頻度を調整できます。「短い」設定はAPI消費が増えるためご注意ください。

	・スケジュール通知を有効にする：
		スケジュール機能のON/OFFを切り替えます。

	・スケジュール管理：
		スケジュールを追加・編集する画面を開きます。

	・音声再生：
		チェックを外すと音声が出なくなります（ミュート）。

	・音量調整：
		キャラクターごとの音声ボリュームを調整できます。

	・API残回数：
		その日のAPI残り使用可能回数の目安を確認できます。

	・API接続設定：
		APIキーや音声エンジンのパスなどをGUIで設定できます。

	・思考モード (Pro使用)：
		チェックを入れると、より高性能なAIモデルを使って応答し、賢い回答が期待できますが、API消費も増えます。

	・スクリーンショット添付モード：
		現在見ている画面をAIに認識させて、それについて話すことができます。（詳細は後述）

	・衣装変更：
		キャラクターの衣装を変更できます。

	・位置調整：
		キャラクターを画面の左端/右端に寄せたり、手動で左右反転させたりできます。

	・お休みさせる：
		(2人モード時のみ)
		キャラクターを退場させ、1人モードに移行します。

	・キャラクター変更：
		別のキャラクターと交代します。

	・キャラクター追加：
		(1人モード時のみ) 
		新しくキャラクターを追加して2人モードにします。

	・会話ログをクリア：
		そのキャラクターのこれまでの会話履歴をリセットします。

	・終了：
		アプリケーションを終了します。

	・タッチ操作：
		キャラクターの画像の上にマウスカーソルを乗せると、カーソルの形が変わる場所があります。
		クリックすると特別な反応を返します。
		複数の反応エリアが重なっている場所では、マウスホイールでアクションを選択できます。

	・好感度システム：
		ユーザーとのやり取りに応じて、キャラクターの好感度が-500〜500で変動します。
		好感度はAIの応答や、キャラクターの横に表示されるハートマークに影響を与えます。
		このデータはキャラクターのフォルダ内に savedata.ini として自動で保存されます。

	・スケジュール機能：
		「スケジュール管理」から予定を追加・編集できます。
		「毎年」「毎月」「毎日」のような繰り返し設定や、「終日イベント」も登録可能です。

	・スクリーンショット機能の活用：
		「スクリーンショット添付モード」にチェックを入れ、「キャプチャ対象選択」から見せたいウィンドウやディスプレイを選択します。
		この状態で話しかけると、AIがスクリーンショットの内容を認識し、応答に含めてくれます。
		（例：ブラウザで猫の画像を見せながら「この子、可愛くない？」と話しかけるなど）

	・モデルの自動チェック機能
		アプリは起動時および3時間ごとに、設定されたAIモデルが有効か、より新しい推奨モデルがないかを自動でチェックします。
		もし問題が見つかった場合は、ダイアログで通知してくれるため、APIの変更に煩わされることなくアプリを使い続けることができます。


■ 4. 応用編：キャラクターの作成・共有・追加
	キャラクターの性格、音声、見た目などを自由にカスタマイズできます。
	カスタマイズには、同梱されている「キャラクタースタジオ」を使うと、簡単かつ安全に設定ファイルを作成できます。

	【推奨】キャラクタースタジオを使った簡単カスタマイズ
		「CharacterMaker/キャラクタースタジオ.exe」を起動すると、キャラクターの作成・編集ツールが開きます。

		1. 起動とプロジェクト選択
			・新規作成: 新しいキャラクターのIDを入力すると、設定ファイルの雛形と必要なフォルダが自動で作成されます。
			・編集: 既存のキャラクターをリストから選択し、「編集」ボタンを押します。
			・【新機能】インストール: 他のユーザーが作成したキャラクターのZIPファイルをリストにドラッグ＆ドロップすると、自動でインストールできます。
			・キャラクターを探す(Web): ボタンを押すと、他のユーザーが共有しているキャラクターを探せるGitHubページをブラウザで開きます。

		2. エディタの主な機能
			・基本設定: キャラクターの名前や、AIに与える「性格設定」の指示文を編集できます。ウィンドウの透過色なども画像から直感的に設定可能です。
			・音声設定: 使用する音声エンジン（VOICEVOX/AivisSpeech）を選ぶと、利用可能な話者とスタイルの一覧が自動で表示されます。スライダーで声質を調整し、その場でテスト再生することも可能です。
			・衣装・表情: 衣装を追加したり、表情ごとの画像（口閉じ/口開き）をドラッグ＆ドロップで簡単に登録できます。
			・タッチエリア: プレビュー画像の上をマウスでドラッグするだけで、当たり判定（タッチエリア）を視覚的に設定できます。
			・好感度設定: 好感度の段階ごとの関係性の名前や、表示されるハート画像をGUIで設定できます。
			・イベントエディタ: キャラクターの物語を紡ぐ機能です。好感度や特定の日時などをトリガーにして発生する、一連の会話劇（イベント）をGUIで作成できます。セリフの表示、ユーザーへの選択肢の提示、フラグによるシナリオ分岐など、複雑なイベントを直感的に構築できます。
			・共有設定: あなたが作成したキャラクターを、他のユーザーと共有するための設定を行います。
				・キャラクター紹介文（readme）の編集
				・二次創作やNSFW（閲覧注意）といった属性の設定
				・共有時のサムネイルに表示する黒塗り修正エリアの追加・編集

		3. キャラクターの共有 (GitHub経由)
			完成したキャラクターは、簡単な操作で世界中に公開できます。
			1. （初回のみ）GitHub連携設定: エディタのメニュー「設定」→「GitHub連携 設定」を開き、画面の指示に従ってPersonal Access Tokenを設定します。
			2. 共有設定の編集: 「共有設定」タブでキャラクター紹介文などを記述します。NSFW属性を有効にした場合は、サムネイルに黒塗り修正を必ず設定してください。
			3. 共有ボタン: 「GitHubに共有...」ボタンを押すと、キャラクターデータがZIPに圧縮され、共有リポジトリにアップロードされます。
			4. ZIPファイルの添付: アップロードが完了すると、ブラウザとZIPファイルが保存されたフォルダが自動で開きます。開かれたブラウザのissueを編集モードにし、フォルダ内のZIPファイルを全てドラッグ＆ドロップして保存してください。

		4. 設定の保存と反映
			エディタで「保存」ボタンを押すと、 characters フォルダ内の character.ini に設定が書き込まれます。
			その後、マスコット本体「ここここ.exe」を起動（または再起動）すると、変更が反映されます。
		
	【上級者向け】iniファイルの手動編集
		キャラクタースタジオが生成した character.ini を、テキストエディタで直接開いて微調整することも可能です。
		ファイル内のコメントを参考に、各項目を編集してください。


■ 5. セキュリティソフト（ウイルス対策ソフト）の警告について
	このアプリケーションは、その機能の性質上、一部のセキュリティソフト（ノートン、ウイルスバスター、Windows Defenderなど）によって、
	警告が表示されたり、ファイルが隔離されたりする場合があります。

	【警告が表示される主な理由】
		これは、キャラクターが「ユーザーがPCから離れているかどうか」を判断するための「離席判定機能」に起因します。
		この機能は、ユーザーが最後にマウスやキーボードを操作してからの経過時間をWindowsに問い合わせることで実現しています。
		しかし、一部のセキュリティソフトは、このような「ユーザーの操作を監視する」という仕組み自体を、潜在的な脅威（キーロガーやスパイウェアなど）として検知し、警告を表示することがあります。

	【安全性について】
		本アプリケーションの離席判定機能は、あくまで「最後に操作があった時刻」を取得するだけです。
		どのキーが押されたか、どこをクリックしたか、どんな文字が入力されたかといった、具体的な操作内容を記録・監視・送信することは一切ありません。

	【警告が表示された場合の対処法】
		もしお使いのセキュリティソフトから警告が表示された場合でも、公式サイトなど信頼できる場所からダウンロードされた本アプリケーションは安全です。
		お手数ですが、ソフトウェアの実行を「許可」するか、監視の「例外（除外）リスト」として設定していただきますようお願いいたします。
		なお、現在のバージョンでは、過去のバージョンに比べて誤検知のリスクを大幅に低減するため、より安全なWindows標準の機能を利用して離席判定を行うように改良されています。
		それでも、ソフトの挙動を監視する性質上、警告が表示される可能性はゼロではありませんので、あらかじめご了承ください。


■ 6. トラブルシューティング
		Q. 起動しない、または起動直後に終了する。
		A. APIキーや音声合成エンジンのパス設定が間違っている可能性があります。キャラクターを右クリックして「API接続設定」を開き、設定内容が正しいか、特に音声エンジンの「run.exeのパス」に誤りがないかを再度ご確認ください。

		Q. キャラクターが喋らない、反応がない。
		A1. APIキーが間違っているか、Googleの無料枠を使い切っている可能性があります。右クリックメニューの「API残回数」で残り回数を確認できます。
		A2. 音声エンジンが正常に起動していない可能性があります。タスクマネージャーで run.exe が実行中か確認してください。
		A3. AIモデルの設定に問題がある可能性があります。右クリックメニューの「API接続設定」を開き、モデルが正しく選択されているか確認してください。モデルが古くなっている場合は、アプリが自動でエラーを通知します。

		Q. キャラクターが「考え中...」のまま動かなくなった。
		A. ネットワークの問題やAPIサーバーの遅延が原因かもしれません。基本的には30秒でタイムアウトしますが、反応がない場合はアプリを再起動してください。

		Q. 画像のフチがきれいに透過できない。
		A. config.ini の [UI] セクションにある TRANSPARENCY_TOLERANCE の値を調整してください。また、キャラクター個別の character.ini の [INFO] セクションに TRANSPARENT_COLOR や EDGE_COLOR を記述することで、キャラごとに色を指定できます。

		Q. 4Kモニターなどでキャラクターが小さく/大きく表示される。
		A. config.ini の [UI] セクションにある WINDOW_WIDTH_RATIO の値を変更して調整してください。（例：0.2 -> 0.15）この値は画面全体の幅に対する比率です。


■ 7. クレジットおよびライセンス
	本アプリケーションは、以下の素晴らしい技術を利用して開発されています。各サービスの利用にあたっては、それぞれの利用規約をご確認ください。
    
    本ソフトウェア自体の利用規約については、以下のファイルをご確認ください。
	    ▶ [AIデスクトップマスコット「ここここ」利用規約](./利用規約.md)
	本ソフトウェアはMITライセンスのもとで提供されます。

	Google Gemini API
		本アプリケーションのキャラクターの思考と会話は、GoogleのGemini APIによって生成されています。
		ユーザーは自身のAPIキーを利用することにより、Google AIの利用規約に同意するものとします。
		公式サイト: https://aistudio.google.com/

	VOICEVOX
		キャラクターの音声合成エンジンとして、VOICEVOXに対応しています。
		VOICEVOXおよび各音声ライブラリ（キャラクター）の音声を利用する際は、それぞれの利用規約を必ずご確認・遵守してください。
		公式サイト: https://voicevox.hiroshiba.jp/

	AivisSpeech
		キャラクターの音声合成エンジンとして、AivisSpeechにも対応しています。
		AivisSpeechの音声を利用する際は、公式の利用規約を必ずご確認・遵守してください。
		公式サイト: https://aivis-project.com/